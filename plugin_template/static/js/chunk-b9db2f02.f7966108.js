(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9db2f02"],{"19a0":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},a=[],i={name:"Docusign",props:{},data:function(){return{toastmessageDocu:"leer"}},components:{},methods:{signApi:function(t){""!=t&&window.open(t,"_blank")}}},r=i,o=s("2877"),c=Object(o["a"])(r,n,a,!1,null,null,null);e["a"]=c.exports},5319:function(t,e,s){"use strict";var n=s("d784"),a=s("825a"),i=s("7b0b"),r=s("50c4"),o=s("a691"),c=s("1d80"),l=s("8aa5"),u=s("14c3"),d=Math.max,p=Math.min,m=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,s,n){var g=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=n.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(s,n){var a=c(this),i=void 0==s?void 0:s[t];return void 0!==i?i.call(s,a,n):e.call(String(a),s,n)},function(t,n){if(!g&&_||"string"===typeof n&&-1===n.indexOf(b)){var i=s(e,t,this,n);if(i.done)return i.value}var c=a(t),m=String(this),v="function"===typeof n;v||(n=String(n));var f=c.global;if(f){var S=c.unicode;c.lastIndex=0}var $=[];while(1){var C=u(c,m);if(null===C)break;if($.push(C),!f)break;var y=String(C[0]);""===y&&(c.lastIndex=l(m,r(c.lastIndex),S))}for(var A="",k=0,E=0;E<$.length;E++){C=$[E];for(var x=String(C[0]),j=d(p(o(C.index),m.length),0),D=[],U=1;U<C.length;U++)D.push(h(C[U]));var T=C.groups;if(v){var N=[x].concat(D,j,m);void 0!==T&&N.push(T);var I=String(n.apply(void 0,N))}else I=w(x,m,j,D,T,n);j>=k&&(A+=m.slice(k,j)+I,k=j+x.length)}return A+m.slice(k)}];function w(t,s,n,a,r,o){var c=n+t.length,l=a.length,u=f;return void 0!==r&&(r=i(r),u=v),e.call(o,u,(function(e,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return s.slice(0,n);case"'":return s.slice(c);case"<":o=r[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>l){var d=m(u/10);return 0===d?e:d<=l?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):e}o=a[u-1]}return void 0===o?"":o}))}}))},"5bf1":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"absolute",bottom:"50px",right:"50px"},attrs:{"aria-live":"polite","aria-atomic":"true"}},[s("div",{staticClass:"toast",attrs:{id:"infotoast","data-autohide":"true","data-delay":"5000"}},[t._m(0),s("div",{staticClass:"toast-body"},[t._v(t._s(t.message))])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toast-header"},[s("strong",{staticClass:"mr-auto"},[t._v("Hinweis")]),s("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","data-dismiss":"toast","aria-label":"Close"}})])}],i=s("1157"),r=s.n(i),o={name:"Toast",props:{message:String},data:function(){return{}},methods:{open:function(){r()("#infotoast").toast("show")}}},c=o,l=s("2877"),u=Object(l["a"])(c,n,a,!1,null,null,null);e["a"]=u.exports},f74b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h2",[t._v("Manager für angelegte Arbeiten")]),s("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("Wissenschaftliche Betreuer, sowie unternehmensinterne Ansprechpartner können den Studenten im jeweiligen Assignment zugeordnet werden.")]),t._l(t.courses,(function(e){return s("table",{key:e.id,staticClass:"table"},[t._m(0,!0),s("tbody",t._l(e.assignments,(function(n){return s("tr",{key:n.id},[s("td",[t._v(t._s(n.id))]),s("td",[t._v(t._s(n.cmid))]),s("td",[t._v(t._s(e.fullname))]),s("td",[t._v(t._s(n.name))]),s("td",[t._v(t._s(n.duedate))]),s("td",[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.showStudents(n)}}},[t._v("Studenten")])])])})),0)])})),s("div",{ref:"modalStudents",staticClass:"modal fade",attrs:{id:"modalStudents",tabindex:"-1",role:"dialog","aria-labelledby":"modalStudents","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"container"},[s("table",{staticClass:"table table-responsive"},[t._m(2),s("tbody",t._l(t.students,(function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.id))]),s("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),s("td",[t._v(t._s(e.currentSupervisor))]),s("td",[s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.newSupervisor,expression:"student.newSupervisor"}],staticClass:"form-control form-control-sm mt-2",attrs:{name:"supervisors",id:"supervisors"},on:{change:[function(s){var n=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"newSupervisor",s.target.multiple?n:n[0])},function(t){e.changed=!0}]}},[s("option",{attrs:{value:"NULL"}}),t._l(t.supervisors,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))])}))],2)])]),s("td",[s("div",[s("button",{ref:"'button'+student.id+'assign'",refInFor:!0,staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.signature(s,e.id)}}},[t._v("Signieren")])])])])})),0)])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.saveData}},[t._v("Änderungen sichern")]),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Schließen")])])])])]),s("Infotoast",{ref:"infotoastref",attrs:{message:t.toastmessage}}),s("Docusign",{ref:"docusigner"})],2)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Assignment ID")]),s("th",{attrs:{scope:"col"}},[t._v("Assignment CMID")]),s("th",{attrs:{scope:"col"}},[t._v("Kurs")]),s("th",{attrs:{scope:"col"}},[t._v("Assignment Name")]),s("th",{attrs:{scope:"col"}},[t._v("Abgabe")]),s("th",{attrs:{scope:"col"}},[t._v("Studenten")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("Diesem Assignment zugewiesene Studenten")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Student ID")]),s("th",{attrs:{scope:"col"}},[t._v("Student Name")]),s("th",{attrs:{scope:"col"}},[t._v("Aktueller Wiss. Betreuer")]),s("th",{attrs:{scope:"col"}},[t._v("Neuer Wiss. Betreuer")]),s("th",{attrs:{scope:"col"}},[t._v("Submission")])])])}],i=(s("ac1f"),s("5319"),s("bc3a")),r=s.n(i),o=s("1157"),c=s.n(o),l=s("5bf1"),u=s("19a0"),d={name:"About",components:{Infotoast:l["a"],Docusign:u["a"]},data:function(){return{students:[],showModal:!1,supervisors:[],courses:[],selectedAssignment:"",toastmessage:"",url:""}},props:{token:{type:String,default:""}},beforeCreate:function(){},mounted:function(){this.getSupervisors(),this.getCourses()},created:function(){},methods:{signature:function(t,e){var s=this;this.$emit("loading","10%",!1);var n={headers:{"Content-Type":"application/json;charset=UTF-8"}};r.a.get("https://scientific-paper.swimdhbw.de//webservice/rest/server.php",{params:{wstoken:this.token,wsfunction:"mod_assign_get_submissions",moodlewsrestformat:"json","assignmentids[0]":this.selectedAssignment}},n).then((function(n){s.$emit("loading","90%",!1);var a="";if(!n.exception&&1==n.data.assignments.length){for(var i=0;i<n.data.assignments[0].submissions.length;i++){var r=n.data.assignments[0].submissions[i];if(r.userid==e)for(var o=0;o<r.plugins.length;o++){var c=r.plugins[o];if("file"==c.type&&1==c.fileareas.length&&1==c.fileareas[0].files.length){var l=c.fileareas[0].files[0].fileurl,u=l.replace("webservice/","");console.log(u),a=u}}}""!=a?s.$refs.docusigner.signApi(a):(t.target.innerHTML="n.A.",t.target.disabled=!0),s.$emit("loading","100%",!0)}})).catch((function(t){console.log(t),s.$emit("loading","100%",!0),s.$emit("ajaxerror")}))},saveData:function(){for(var t=this,e=[],s=0;s<this.students.length;s++)this.students[s].changed&&e.push({studentid:this.students[s].id,supervisorid:this.students[s].newSupervisor,assignid:this.selectedAssignment,corporatepartnerid:1});var n={changes:e},a={variables:{dbchanges:{value:JSON.stringify(n),type:"String"}}};this.$emit("loading","10%",!1),r.a.post((Object({NODE_ENV:"production",VUE_APP_MOODEL_URL:"https://scientific-paper.swimdhbw.de/",BASE_URL:"/mod/spams/static/"}).VUE_APP_CAMUNDA_URL||"https://camunda.scientific-paper.swimdhbw.de/")+"engine-rest/process-definition/key/application_for_paper/start",a,{headers:{"Content-type":"application/json"}}).then((function(e){t.$emit("loading","100%",!0),200==e.status?t.toastmessage="Die Zuordnung wurde erfolgreich angefordert.":t.toastmessage="Bei der Anforderung der Zuordnung ist ein Fehler aufgetreten.",t.$refs.infotoastref.open()}))},mapSupervisorName:function(t){var e="";console.log(this.supervisors);for(var s=0;s<this.supervisors.length;s++)this.supervisors[s].id==t&&(e=this.supervisors[s].firstname+" "+this.supervisors[s].lastname);return e},showStudents:function(t){var e=this,s=t.course;this.selectedAssignment=t.id,this.$emit("loading","10%",!1),this.students=[];var n={headers:{"Content-Type":"application/json;charset=UTF-8"}};r.a.get("https://scientific-paper.swimdhbw.de//webservice/rest/server.php",{params:{wstoken:this.token,wsfunction:"core_enrol_get_enrolled_users",moodlewsrestformat:"json",courseid:s}},n).then((function(t){t.exception||(e.students=e.filterStudents(t.data),r.a.get("https://scientific-paper.swimdhbw.de//webservice/rest/server.php",{params:{wstoken:e.token,wsfunction:"local_spsupman_get_studenthassupervisor",moodlewsrestformat:"json"}},n).then((function(t){if(!t.exception){for(var s=0;s<t.data.length;s++)for(var n=0;n<e.students.length;n++)e.students[n].id==t.data[s].studentid&&t.data[s].assignmentid==e.selectedAssignment&&(e.students[n].currentSupervisor=e.mapSupervisorName(t.data[s].supervisorid));c()("#modalStudents").modal("show"),e.$emit("loading","100%",!0)}})).catch((function(t){console.log(t),e.$emit("loading","100%",!0),e.$emit("ajaxerror")})))})).catch((function(t){console.log(t),e.$emit("loading","100%",!0),e.$emit("ajaxerror")}))},getSupervisors:function(){var t=this;this.$emit("loading","10%",!1),this.supervisors=[];var e={headers:{"Content-Type":"application/json;charset=UTF-8"}};r.a.get("https://scientific-paper.swimdhbw.de//webservice/rest/server.php",{params:{wstoken:this.token,wsfunction:"local_spsupman_get_supervisors",moodlewsrestformat:"json"}},e).then((function(e){e.data.exception?(t.$emit("loading","100%",!0),t.$emit("ajaxerror")):(t.supervisors=e.data,t.$emit("loading","100%",!0))})).catch((function(e){console.log(e),t.$emit("loading","100%",!0),t.$emit("ajaxerror")}))},filterStudents:function(t){for(var e=[],s=0;s<t.length;s++){for(var n=!1,a=0;a<t[s].roles.length;a++)5==t[s].roles[a].roleid&&(n=!0);n&&(t[s].currentSupervisor="",t[s].changed=!1,t[s].newSupervisor="",e.push(t[s]))}return e},getCourses:function(){var t=this;this.$emit("loading","10%",!1);var e={headers:{"Content-Type":"application/json;charset=UTF-8"}};r.a.get("https://scientific-paper.swimdhbw.de//webservice/rest/server.php",{params:{wstoken:this.token,wsfunction:"mod_assign_get_assignments",moodlewsrestformat:"json"}},e).then((function(e){t.$emit("loading","100%",!0),e.exception||(t.courses=e.data.courses,console.log(t.courses))})).catch((function(e){t.$emit("loading","100%",!0),t.$emit("ajaxerror"),console.log(e)}))}}},p=d,m=s("2877"),v=Object(m["a"])(p,n,a,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-b9db2f02.f7966108.js.map
